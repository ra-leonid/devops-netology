## Задача 1
Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

**Ответ**:

Linux: `ip link show`, `ifconfig -a`, `ls /sys/class/net`, `cat /proc/net/dev`, `nmcli device status`
```commandline
$ ip link show
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 2c:56:dc:9b:d5:55 brd ff:ff:ff:ff:ff:ff

$ ifconfig -a
eno1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.109  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::61c7:a441:c0a4:920e  prefixlen 64  scopeid 0x20<link>
        ether 2c:56:dc:9b:d5:55  txqueuelen 1000  (Ethernet)
        RX packets 108858  bytes 132769138 (132.7 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 74079  bytes 23219721 (23.2 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 20  memory 0xf7f00000-f7f20000  

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Локальная петля (Loopback))
        RX packets 1415  bytes 182126 (182.1 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1415  bytes 182126 (182.1 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

$ ls /sys/class/net
eno1  lo

$ cat /proc/net/dev
Inter-|   Receive                                                |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed
    lo:  239979    1850    0    0    0     0          0         0   239979    1850    0    0    0     0       0          0
  eno1: 133500028  111818    0    0    0     0          0       789 25861846   77798    0    0    0     0       0          0

$ nmcli device status
DEVICE  TYPE      STATE          CONNECTION             
eno1    ethernet  подключено     Проводное соединение 2 
lo      loopback  не настроенно  -- 
```

Windows: `ipconfig`, `ipconfig /all`
```commandline
D:\Users\Leonid>ipconfig

Настройка протокола IP для Windows


Адаптер Ethernet Ethernet:

   DNS-суффикс подключения . . . . . :
   Локальный IPv6-адрес канала . . . : fe80::3db6:6e43:f06c:2c09%5
   IPv4-адрес. . . . . . . . . . . . : 192.168.0.109
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . : 192.168.0.1

Адаптер Ethernet Ethernet 2:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet 4:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
```

## Задача 2
Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

**Ответ**:

LLDP – протокол для обмена информацией между соседними устройствами,
позволяет определить к какому порту коммутатора подключен сервер.

Запуск протокола как службы `systemctl enable lldpd && systemctl start lldpd`

Сама команда: `lldpctl`

## Задача 3
Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

**Ответ**: VLAN – виртуальное разделение коммутатора. Настройки указываются в файле /etc/network/interfaces.
Независимо от того, настраивается VLAN при загрузке скрипта, обрабатывающими /etc/network/interfaces, своими собственными скриптами или вручную, использование VLAN в Ubuntu требует установленного пакета vlan, содержащего утилиту vconfig
Пример:
```commandline
auto vlan1400
iface vlan1400 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
```

## Задание 4
Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

**Ответ**: 

Типы агрегации интерфейсов в Linux:

**Mode-0(balance-rr)** – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.

**Mode-1(active-backup)** – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.

**Mode-2(balance-xor)** – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.

**Mode-3(broadcast)** – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.

**Mode-4(802.3ad)** – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.

**Mode-5(balance-tlb)** – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

**Mode-6(balance-alb)** – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

Тип конфига:
```commandline
auto bond0

iface bond0 inet static
    address 10.31.1.5
    netmask 255.255.255.0
    network 10.31.1.0
    gateway 10.31.1.254
    bond-slaves eth0 eth1
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200
```

## Задание 5
Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

**Ответ**: 
* В сети с маской /29 - 6 хостов
* Из сети /24 можно получить 32 подсети /29
* Примеры /29 подсетей внутри сети 10.10.10.0/24
  * 10.10.10.0/29, маска подсети 255.255.255.248, минимальный ip 10.10.10.1, максимальный 10.10.10.6, широковещательный 10.10.10.7
  * 10.10.10.8/29, маска подсети 255.255.255.248, минимальный ip 10.10.10.9, максимальный 10.10.10.14, широковещательный 10.10.10.15
  * 10.10.10.56/29, маска подсети 255.255.255.248, минимальный ip 10.10.10.57, максимальный 10.10.10.62, широковещательный 10.10.10.63

## Задание 6
Вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

**Ответ**: 100.64.0.0/26 вмещает 62 хоста, маска подсети 255.255.255.192, минимальный ip 100.64.0.1, максимальный 100.64.0.62, широковещательный 100.64.0.63

## Задание 7
Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

**Ответ**: 

* Как проверить ARP таблицу в Linux, Windows? `arp -a`. 
* Как очистить ARP кеш полностью? В Windows: `netsh interface ip delete arpcache`. В Linux: `sudo ip neigh flush all`.
* Как из ARP таблицы удалить только один нужный IP? `arp -d HostName`. 